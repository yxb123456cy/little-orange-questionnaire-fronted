import{r as v,a as F,d as I,u as L,c as N,b as i,e as z,f as a,w as t,g as s,h as l,o as B,I as C,i as R,j as d,k as h,M as u,_ as j}from"./index-0k8HkCPh.js";function q(){const c=v(!1),m=F({email:"",password:"",remember:!1});return{loading:c,form:m,rules:{email:[{required:!0,message:"请输入邮箱地址"},{type:"email",message:"请输入正确的邮箱格式"}],password:[{required:!0,message:"请输入密码"},{minLength:6,message:"密码长度不能少于6位"}]}}}const M={class:"login-container"},E={class:"login-card"},P={class:"form-options"},Q={class:"register-link"},T=I({__name:"Login",setup(c){const m=h(),{loading:n,form:o,rules:b}=q(),p=v(),w=L();async function x({errors:f}){if(!f){n.value=!0;try{console.warn("登录信息:",o);const e=w.login(o.email,o.password);e.state===!0?(u.success("登录成功"),m.push("/")):(e.field==="email"&&(u.error("该邮箱未注册"),p.value?.setFields({email:{status:"error",message:"该邮箱未注册"}})),e.field==="password"&&(p.value?.setFields({password:{status:"error",message:"密码错误,请检查密码"}}),u.error("密码错误,请检查密码")))}catch(e){console.error(e),u.error("登录失败，请检查账号密码")}finally{n.value=!1}}}return(f,e)=>{const V=l("a-input"),g=l("a-form-item"),k=l("a-input-password"),y=l("a-checkbox"),_=l("a-link"),S=l("a-button"),U=l("a-form");return B(),N("div",M,[i("div",E,[e[8]||(e[8]=z('<div class="logo-section" data-v-6123d0c8><div class="logo" data-v-6123d0c8><span class="logo-icon" data-v-6123d0c8>🍊</span><span class="logo-text" data-v-6123d0c8>小橘问卷</span></div><p class="subtitle" style="color:#ff7a00;font-weight:800;" data-v-6123d0c8> Xiaoju Questionnaire </p><p class="subtitle" style="margin-top:1vh;" data-v-6123d0c8> 欢迎回来 </p></div>',1)),a(U,{ref_key:"loginFormRef",ref:p,model:s(o),rules:s(b),layout:"vertical",class:"login-form",onSubmit:x},{default:t(()=>[a(g,{field:"email",label:"邮箱"},{default:t(()=>[a(V,{modelValue:s(o).email,"onUpdate:modelValue":e[0]||(e[0]=r=>s(o).email=r),placeholder:"请输入邮箱地址",size:"large",prefix:s(C)},null,8,["modelValue","prefix"])]),_:1}),a(g,{field:"password",label:"密码"},{default:t(()=>[a(k,{modelValue:s(o).password,"onUpdate:modelValue":e[1]||(e[1]=r=>s(o).password=r),placeholder:"请输入密码",size:"large",prefix:s(R)},null,8,["modelValue","prefix"])]),_:1}),i("div",P,[a(y,{modelValue:s(o).remember,"onUpdate:modelValue":e[2]||(e[2]=r=>s(o).remember=r)},{default:t(()=>[...e[3]||(e[3]=[d(" 记住我 ",-1)])]),_:1},8,["modelValue"]),a(_,{href:"/forgot-password",class:"forgot-link"},{default:t(()=>[...e[4]||(e[4]=[d(" 忘记密码？ ",-1)])]),_:1})]),a(S,{type:"primary","html-type":"submit",size:"large",class:"login-button",loading:s(n),long:""},{default:t(()=>[...e[5]||(e[5]=[d(" 登录 ",-1)])]),_:1},8,["loading"])]),_:1},8,["model","rules"]),i("div",Q,[e[7]||(e[7]=i("span",null,"还没有账号？",-1)),a(_,{href:"/register",class:"register-text"},{default:t(()=>[...e[6]||(e[6]=[d(" 立即注册 ",-1)])]),_:1})])])])}}}),A=j(T,[["__scopeId","data-v-6123d0c8"]]);export{A as default};
