import{r as g,q as te,d as ve,N as fe,c as _,b as l,f as s,w as a,h as m,O as C,g as o,P as D,v as I,t as p,F as M,x as N,o as d,j as n,n as se,Q as ge,R as me,S as ye,C as R,T as ae,U as le,V as we,p as j,A as oe,W as ke,K as ne,X as be,Y as Ce,I as xe,M as A,k as he,H as ze,_ as Te}from"./index-0k8HkCPh.js";function Ve(){const G=g(!1),Q=g("card"),k=g(""),b=g(""),w=g([]),x=g(""),T=g("created_desc"),V=g(1),h=g(12),z=g([{label:"产品调研",value:"product"},{label:"用户体验",value:"ux"},{label:"市场分析",value:"market"},{label:"员工满意度",value:"employee"},{label:"客户反馈",value:"feedback"}]),S=g([{label:"满意度",value:"satisfaction"},{label:"体验",value:"experience"},{label:"功能",value:"feature"},{label:"性能",value:"performance"},{label:"界面",value:"ui"},{label:"服务",value:"service"}]),Z=g([{id:1,title:"用户满意度调研问卷",description:"了解用户对我们产品和服务的满意度，收集改进建议",status:"published",group:"product",tags:["satisfaction","experience"],is_starred:!0,response_count:156,view_count:892,created_at:"2024-01-15T08:00:00Z",updated_at:"2024-01-20T10:30:00Z"},{id:2,title:"产品功能需求调研",description:"收集用户对新功能的需求和期望",status:"draft",group:"product",tags:["feature","ui"],is_starred:!1,response_count:0,view_count:23,created_at:"2024-01-18T14:20:00Z",updated_at:"2024-01-18T14:20:00Z"},{id:3,title:"网站用户体验评估",description:"评估网站的易用性和用户体验",status:"published",group:"ux",tags:["experience","ui"],is_starred:!1,response_count:89,view_count:445,created_at:"2024-01-10T09:15:00Z",updated_at:"2024-01-19T16:45:00Z"},{id:4,title:"员工工作满意度调查",description:"了解员工对工作环境和福利的满意度",status:"closed",group:"employee",tags:["satisfaction","service"],is_starred:!0,response_count:234,view_count:567,created_at:"2024-01-05T11:30:00Z",updated_at:"2024-01-15T09:20:00Z"},{id:5,title:"客户服务质量评价",description:"收集客户对我们服务质量的评价和建议",status:"published",group:"feedback",tags:["service","satisfaction"],is_starred:!1,response_count:67,view_count:234,created_at:"2024-01-12T16:00:00Z",updated_at:"2024-01-17T14:30:00Z"}]),E=[{title:"问卷标题",dataIndex:"title",slotName:"title",width:300},{title:"状态",dataIndex:"status",slotName:"status",width:100},{title:"分组",dataIndex:"group",width:120,render:({record:i})=>i.group||"未分组"},{title:"标签",dataIndex:"tags",slotName:"tags",width:150},{title:"回答数",dataIndex:"response_count",width:100,render:({record:i})=>i.response_count||0},{title:"创建时间",dataIndex:"created_at",slotName:"created_at",width:120},{title:"操作",slotName:"actions",width:150,fixed:"right"}],$=te(()=>{let i=[...Z.value];if(k.value){const u=k.value.toLowerCase();i=i.filter(v=>v.title.toLowerCase().includes(u)||v.description&&v.description.toLowerCase().includes(u))}return b.value&&(i=i.filter(u=>u.group===b.value)),w.value.length>0&&(i=i.filter(u=>u.tags&&u.tags.some(v=>w.value.includes(v)))),x.value&&(i=i.filter(u=>u.status===x.value)),i.sort((u,v)=>{switch(T.value){case"created_desc":return new Date(v.created_at).getTime()-new Date(u.created_at).getTime();case"created_asc":return new Date(u.created_at).getTime()-new Date(v.created_at).getTime();case"updated_desc":return new Date(v.updated_at).getTime()-new Date(u.updated_at).getTime();case"title_asc":return u.title.localeCompare(v.title);default:return 0}}),i}),K=te(()=>{const i=(V.value-1)*h.value,u=i+h.value;return $.value.slice(i,u)});return{loading:G,viewMode:Q,searchKeyword:k,selectedGroup:b,selectedTags:w,selectedStatus:x,sortBy:T,currentPage:V,pageSize:h,groups:z,tags:S,questionnaires:Z,tableColumns:E,filteredQuestionnaires:$,paginatedQuestionnaires:K}}const Ie={class:"questionnaires"},Se={class:"questionnaires-container"},$e={class:"page-header"},De={class:"header-right"},Me={class:"filter-section"},Ne={class:"filter-row"},Qe={class:"search-box"},Ze={class:"view-toggle"},Ue={class:"filter-row"},Be={class:"filter-item"},Le={class:"filter-item"},Pe={class:"filter-item"},Fe={class:"filter-item"},Ae={class:"questionnaires-content"},Ee={key:0,class:"card-view"},Ke={key:0,class:"loading-state"},Re={key:1,class:"empty-state"},je={key:2,class:"questionnaire-grid"},Ge={class:"card-header"},He={class:"card-status"},Oe={class:"card-actions"},We=["onClick"],Xe={class:"questionnaire-title"},Ye={class:"questionnaire-description"},Je={class:"questionnaire-meta"},qe={class:"meta-item"},et={class:"meta-item"},tt={key:0,class:"questionnaire-tags"},st={class:"card-footer"},at={class:"questionnaire-stats"},lt={class:"stat-item"},ot={class:"stat-item"},nt={key:1,class:"table-view"},it=["onClick"],dt={class:"title-text"},rt={class:"table-tags"},ut={key:0,class:"more-tags"},ct={class:"table-actions"},pt={key:2,class:"pagination-wrapper"},_t=ve({__name:"Questionnaires",setup(G){const Q=he(),{loading:k,viewMode:b,searchKeyword:w,selectedGroup:x,selectedTags:T,selectedStatus:V,sortBy:h,currentPage:z,pageSize:S,groups:Z,tags:E,questionnaires:$,tableColumns:K,filteredQuestionnaires:i,paginatedQuestionnaires:u}=Ve();function v(r){return new Date(r).toLocaleDateString("zh-CN")}function H(r){return{draft:"gray",published:"green",closed:"red"}[r]||"gray"}function O(r){return{draft:"草稿",published:"已发布",closed:"已关闭"}[r]||"未知"}function W(){z.value=1}function U(){z.value=1}function X(){Q.push("/questionnaires/create")}function B(r){console.warn("预览问卷:",r),A.info(`预览问卷：${r.title}`)}function Y(r){Q.push(`/questionnaires/${r.id}/edit`)}function ie(r){A.success(`已复制问卷：${r.title}`)}function J(r){r.is_starred=!r.is_starred,A.success(r.is_starred?"已加入星标":"已取消星标")}function q(r){ze.confirm({title:"确认移至回收站？",content:`问卷「${r.title}」将被移至回收站，可在回收站中恢复。`,onOk:()=>{const e=$.value.findIndex(f=>f.id===r.id);e>-1&&($.value.splice(e,1),A.success("已移至回收站"))}})}return fe(()=>{k.value=!0,setTimeout(()=>{k.value=!1},1e3)}),(r,e)=>{const f=m("a-button"),de=m("a-input-search"),ee=m("a-radio"),re=m("a-radio-group"),y=m("a-option"),L=m("a-select"),ue=m("a-spin"),P=m("a-tag"),F=m("a-doption"),ce=m("a-dropdown"),pe=m("a-table"),_e=m("a-pagination");return d(),_("div",Ie,[l("div",Se,[l("div",$e,[e[9]||(e[9]=l("div",{class:"header-left"},[l("h1",{class:"page-title"}," 我的问卷 "),l("p",{class:"page-description"}," 管理和查看您创建的所有问卷 ")],-1)),l("div",De,[s(f,{type:"primary",size:"large",class:"create-btn",onClick:X},{icon:a(()=>[s(o(se))]),default:a(()=>[e[8]||(e[8]=n(" 创建问卷 ",-1))]),_:1})])]),l("div",Me,[l("div",Ne,[l("div",Qe,[s(de,{modelValue:o(w),"onUpdate:modelValue":e[0]||(e[0]=t=>C(w)?w.value=t:null),placeholder:"搜索问卷标题或简介...",size:"large","allow-clear":"",onSearch:W,onClear:W},{prefix:a(()=>[s(o(ge))]),_:1},8,["modelValue"])]),l("div",Ze,[s(re,{modelValue:o(b),"onUpdate:modelValue":e[1]||(e[1]=t=>C(b)?b.value=t:null),type:"button",size:"large"},{default:a(()=>[s(ee,{value:"card"},{radio:a(({checked:t})=>[s(f,{type:t?"primary":"outline",class:"view-btn"},{icon:a(()=>[s(o(me))]),default:a(()=>[e[10]||(e[10]=n(" 卡片 ",-1))]),_:2},1032,["type"])]),_:1}),s(ee,{value:"table"},{radio:a(({checked:t})=>[s(f,{type:t?"primary":"outline",class:"view-btn"},{icon:a(()=>[s(o(ye))]),default:a(()=>[e[11]||(e[11]=n(" 表格 ",-1))]),_:2},1032,["type"])]),_:1})]),_:1},8,["modelValue"])])]),l("div",Ue,[l("div",Be,[e[13]||(e[13]=l("label",{class:"filter-label"},"分组：",-1)),s(L,{modelValue:o(x),"onUpdate:modelValue":e[2]||(e[2]=t=>C(x)?x.value=t:null),placeholder:"选择分组",size:"large",style:{width:"160px"},"allow-clear":"",onChange:U},{default:a(()=>[s(y,{value:""},{default:a(()=>[...e[12]||(e[12]=[n(" 全部分组 ",-1)])]),_:1}),(d(!0),_(M,null,N(o(Z),t=>(d(),I(y,{key:t.value,value:t.value},{default:a(()=>[n(p(t.label),1)]),_:2},1032,["value"]))),128))]),_:1},8,["modelValue"])]),l("div",Le,[e[14]||(e[14]=l("label",{class:"filter-label"},"标签：",-1)),s(L,{modelValue:o(T),"onUpdate:modelValue":e[3]||(e[3]=t=>C(T)?T.value=t:null),placeholder:"选择标签",size:"large",style:{width:"200px"},multiple:"","allow-clear":"",onChange:U},{default:a(()=>[(d(!0),_(M,null,N(o(E),t=>(d(),I(y,{key:t.value,value:t.value},{default:a(()=>[n(p(t.label),1)]),_:2},1032,["value"]))),128))]),_:1},8,["modelValue"])]),l("div",Pe,[e[19]||(e[19]=l("label",{class:"filter-label"},"状态：",-1)),s(L,{modelValue:o(V),"onUpdate:modelValue":e[4]||(e[4]=t=>C(V)?V.value=t:null),placeholder:"选择状态",size:"large",style:{width:"120px"},"allow-clear":"",onChange:U},{default:a(()=>[s(y,{value:""},{default:a(()=>[...e[15]||(e[15]=[n(" 全部状态 ",-1)])]),_:1}),s(y,{value:"draft"},{default:a(()=>[...e[16]||(e[16]=[n(" 草稿 ",-1)])]),_:1}),s(y,{value:"published"},{default:a(()=>[...e[17]||(e[17]=[n(" 已发布 ",-1)])]),_:1}),s(y,{value:"closed"},{default:a(()=>[...e[18]||(e[18]=[n(" 已关闭 ",-1)])]),_:1})]),_:1},8,["modelValue"])]),l("div",Fe,[e[24]||(e[24]=l("label",{class:"filter-label"},"排序：",-1)),s(L,{modelValue:o(h),"onUpdate:modelValue":e[5]||(e[5]=t=>C(h)?h.value=t:null),size:"large",style:{width:"140px"},onChange:U},{default:a(()=>[s(y,{value:"created_desc"},{default:a(()=>[...e[20]||(e[20]=[n(" 创建时间↓ ",-1)])]),_:1}),s(y,{value:"created_asc"},{default:a(()=>[...e[21]||(e[21]=[n(" 创建时间↑ ",-1)])]),_:1}),s(y,{value:"updated_desc"},{default:a(()=>[...e[22]||(e[22]=[n(" 更新时间↓ ",-1)])]),_:1}),s(y,{value:"title_asc"},{default:a(()=>[...e[23]||(e[23]=[n(" 标题A-Z ",-1)])]),_:1})]),_:1},8,["modelValue"])])])]),l("div",Ae,[o(b)==="card"?(d(),_("div",Ee,[o(k)?(d(),_("div",Ke,[s(ue,{size:"large"}),e[25]||(e[25]=l("p",null,"加载中...",-1))])):o(i).length===0?(d(),_("div",Re,[e[27]||(e[27]=l("div",{class:"empty-icon"}," 📋 ",-1)),e[28]||(e[28]=l("h3",null,"暂无问卷",-1)),l("p",null,p(o(w)?"没有找到匹配的问卷":"开始创建您的第一份问卷吧"),1),o(w)?D("",!0):(d(),I(f,{key:0,type:"primary",onClick:X},{icon:a(()=>[s(o(se))]),default:a(()=>[e[26]||(e[26]=n(" 创建问卷 ",-1))]),_:1}))])):(d(),_("div",je,[(d(!0),_(M,null,N(o(u),t=>(d(),_("div",{key:t.id,class:"questionnaire-card"},[l("div",Ge,[l("div",He,[s(P,{color:H(t.status),class:"status-tag"},{default:a(()=>[n(p(O(t.status)),1)]),_:2},1032,["color"]),l("div",Oe,[s(f,{type:"text",size:"small",class:le({starred:t.is_starred}),onClick:c=>J(t)},{icon:a(()=>[s(o(R),{style:ae({color:t.is_starred?"#ff7a00":"#999"})},null,8,["style"])]),_:2},1032,["class","onClick"]),s(ce,{trigger:"click"},{content:a(()=>[s(F,{onClick:c=>B(t)},{icon:a(()=>[s(o(j))]),default:a(()=>[e[29]||(e[29]=n(" 预览 ",-1))]),_:2},1032,["onClick"]),s(F,{onClick:c=>Y(t)},{icon:a(()=>[s(o(oe))]),default:a(()=>[e[30]||(e[30]=n(" 编辑 ",-1))]),_:2},1032,["onClick"]),s(F,{onClick:c=>ie(t)},{icon:a(()=>[s(o(ke))]),default:a(()=>[e[31]||(e[31]=n(" 复制 ",-1))]),_:2},1032,["onClick"]),s(F,{class:"danger-option",onClick:c=>q(t)},{icon:a(()=>[s(o(ne))]),default:a(()=>[e[32]||(e[32]=n(" 移至回收站 ",-1))]),_:2},1032,["onClick"])]),default:a(()=>[s(f,{type:"text",size:"small"},{icon:a(()=>[s(o(we))]),_:1})]),_:2},1024)])])]),l("div",{class:"card-content",onClick:c=>B(t)},[l("h3",Xe,p(t.title),1),l("p",Ye,p(t.description||"暂无简介"),1),l("div",Je,[l("div",qe,[s(o(be),{class:"meta-icon"}),l("span",null,p(t.group||"未分组"),1)]),l("div",et,[s(o(Ce),{class:"meta-icon"}),l("span",null,p(v(t.created_at)),1)])]),t.tags&&t.tags.length>0?(d(),_("div",tt,[(d(!0),_(M,null,N(t.tags,c=>(d(),I(P,{key:c,size:"small",class:"tag"},{default:a(()=>[n(p(c),1)]),_:2},1024))),128))])):D("",!0)],8,We),l("div",st,[l("div",at,[l("span",lt,[s(o(xe),{class:"stat-icon"}),n(" "+p(t.response_count||0)+" 回答 ",1)]),l("span",ot,[s(o(j),{class:"stat-icon"}),n(" "+p(t.view_count||0)+" 浏览 ",1)])])])]))),128))]))])):(d(),_("div",nt,[s(pe,{columns:o(K),data:o(u),loading:o(k),pagination:!1,"row-key":"id",class:"questionnaire-table"},{title:a(({record:t})=>[l("div",{class:"table-title",onClick:c=>B(t)},[l("span",dt,p(t.title),1),t.is_starred?(d(),I(o(R),{key:0,class:"star-icon",style:{color:"#ff7a00"}})):D("",!0)],8,it)]),status:a(({record:t})=>[s(P,{color:H(t.status)},{default:a(()=>[n(p(O(t.status)),1)]),_:2},1032,["color"])]),tags:a(({record:t})=>[l("div",rt,[(d(!0),_(M,null,N((t.tags||[]).slice(0,2),c=>(d(),I(P,{key:c,size:"small"},{default:a(()=>[n(p(c),1)]),_:2},1024))),128)),t.tags&&t.tags.length>2?(d(),_("span",ut," +"+p(t.tags.length-2),1)):D("",!0)])]),created_at:a(({record:t})=>[n(p(v(t.created_at)),1)]),actions:a(({record:t})=>[l("div",ct,[s(f,{type:"text",size:"small",class:le({starred:t.is_starred}),onClick:c=>J(t)},{icon:a(()=>[s(o(R),{style:ae({color:t.is_starred?"#ff7a00":"#999"})},null,8,["style"])]),_:2},1032,["class","onClick"]),s(f,{type:"text",size:"small",onClick:c=>B(t)},{icon:a(()=>[s(o(j))]),_:2},1032,["onClick"]),s(f,{type:"text",size:"small",onClick:c=>Y(t)},{icon:a(()=>[s(o(oe))]),_:2},1032,["onClick"]),s(f,{type:"text",size:"small",class:"danger-btn",onClick:c=>q(t)},{icon:a(()=>[s(o(ne))]),_:2},1032,["onClick"])])]),_:1},8,["columns","data","loading"])])),o(i).length>0?(d(),_("div",pt,[s(_e,{current:o(z),"onUpdate:current":e[6]||(e[6]=t=>C(z)?z.value=t:null),"page-size":o(S),"onUpdate:pageSize":e[7]||(e[7]=t=>C(S)?S.value=t:null),total:o(i).length,"show-total":!0,"show-jumper":!0,"show-page-size":!0,"page-size-options":["10","20","50","100"],class:"pagination"},null,8,["current","page-size","total"])])):D("",!0)])])])}}}),ft=Te(_t,[["__scopeId","data-v-afab8cdc"]]);export{ft as default};
